{"version":3,"sources":["../src/organisations_ctrl.js"],"names":["PanelCtrl","OrganisationsCtrl","$scope","$injector","$location","backendSrv","organisationList","baseURL","window","location","href","split","loadOrganisations","get","then","result","map","item","id","orgId","name","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,qB,kBAAAA,S;;;;;;;;;;;;;;;;;;;;;8DAEHC,iB;;;AACF;;;;;;;AAOA,2CAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsD;AAAA;;AAAA,sJAC5CH,MAD4C,EACpCC,SADoC;;AAElD;AACA,0BAAKE,UAAL,GAAkBA,UAAlB;AACA,0BAAKC,gBAAL,GAAwB,EAAxB;AACA;AACA,0BAAKC,OAAL,GAAeC,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,KAA3B,EAAkC,CAAlC,CAAf;AACA;AACA,0BAAKC,iBAAL;AARkD;AASrD;AACD;;;;;;;wDAGoB;AAAA;;AAChB;AACA,6BAAKP,UAAL,CAAgBQ,GAAhB,CAAoB,eAApB,EAAqCC,IAArC,CAA0C,UAACC,MAAD,EAAY;AAClD,mCAAKT,gBAAL,GAAwBS,OAAOC,GAAP,CAAW,UAACC,IAAD,EAAU;AACzC,uCAAO;AACHC,wCAAID,KAAKE,KADN;AAEHC,0CAAMH,KAAKG;AAFR,iCAAP;AAIH,6BALuB,CAAxB;AAMH,yBAPD;AAQH;;;;cA/B2BpB,S;;AAiChCC,8BAAkBoB,WAAlB,GAAgC,aAAhC;;yCACSpB,iB;;iCAAmBA,iB","file":"organisations_ctrl.js","sourcesContent":["/// <reference path=\"../typings/common.d.ts\" />\n/// <reference path=\"../typings/index.d.ts\" />\nimport { PanelCtrl } from \"app/plugins/sdk\";\nimport \"./style.css!\";\nclass OrganisationsCtrl extends PanelCtrl {\n    /**\n     * DashboardList class constructor\n     * @param {IOrganisationsScope} $scope Angular scope\n     * @param {ng.auto.IInjectorService} $injector Angluar injector service\n     * @param {ng.ILocationService} $location Angular location service\n     * @param {any} backendSrv Grafana backend callback\n     */\n    constructor($scope, $injector, $location, backendSrv) {\n        super($scope, $injector);\n        // Init variables\n        this.backendSrv = backendSrv;\n        this.organisationList = [];\n        // Store the URL part before dashboard definition as baseURL\n        this.baseURL = window.location.href.split(\"/d/\")[0];\n        // Load organizations for current user\n        this.loadOrganisations();\n    }\n    /**\n     * Load dashboard items\n     */\n    loadOrganisations() {\n        // Fetch list of organisations of current user from Grafana\n        this.backendSrv.get(\"api/user/orgs\").then((result) => {\n            this.organisationList = result.map((item) => {\n                return {\n                    id: item.orgId,\n                    name: item.name\n                };\n            });\n        });\n    }\n}\nOrganisationsCtrl.templateUrl = \"module.html\";\nexport { OrganisationsCtrl, OrganisationsCtrl as PanelCtrl };\n//# sourceMappingURL=organisations_ctrl.js.map"]}